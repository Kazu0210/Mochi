<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Spinning Orb with Layered, Absorbing, and Varied-Distance Particles</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @keyframes spin-slow {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    @keyframes spin-slow-reverse {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(-360deg); }
    }

    @keyframes pulse-outline {
      0%, 100% {
        box-shadow: 0 0 40px 10px rgba(168, 85, 247, 0.3);
      }
      50% {
        box-shadow: 0 0 60px 20px rgba(168, 85, 247, 0.6);
      }
    }

    @keyframes absorb {
      0% {
        transform: rotate(0deg) translateX(var(--orbit-distance)) scale(1);
        opacity: 1;
      }
      100% {
        transform: rotate(720deg) translateX(0px) scale(0.2);
        opacity: 0;
      }
    }

    .spin-slow {
      animation: spin-slow 10s linear infinite;
    }

    .reverse-spin {
      animation: spin-slow-reverse 10s linear infinite;
    }

    .pulse-outline {
      animation: pulse-outline 2.5s ease-in-out infinite;
    }

    .particle-orbit {
      position: absolute;
      top: 50%;
      left: 50%;
      transform-origin: center;
      pointer-events: none;
    }

    .particle {
      background-color: rgba(255, 255, 255, 0.9);
      border-radius: 9999px;
      position: absolute;
      transform: translate(-50%, -50%);
      box-shadow: 0 0 12px 4px rgba(255, 255, 255, 0.6);
    }

    .absorbing {
      animation: absorb var(--absorb-duration) ease-in-out forwards;
    }

    @keyframes incoming {
    0% {
        transform: translate(var(--start-x), var(--start-y)) scale(1);
        opacity: 1;
    }
    100% {
        transform: translate(0, 0) scale(0.2);
        opacity: 0;
    }
    }

    .incoming {
    animation: incoming var(--incoming-duration) linear forwards;
    position: absolute;
    top: 50%;
    left: 50%;
    pointer-events: none;
    }

  </style>
</head>
<body class="bg-gray-900 min-h-screen flex items-center justify-center">

  <div class="relative w-60 h-60 flex items-center justify-center">
    <!-- Orb -->
    <div class="w-40 h-40 rounded-full bg-transparent border border-[rgba(168,85,247,0.3)] 
                pulse-outline spin-slow z-10"></div>

    <!-- Particle Container -->
    <div id="particles" class="absolute inset-0"></div>
  </div>

  <script>
        const container = document.getElementById('particles');

        function createParticle() {
        const orbit = document.createElement('div');
        const particle = document.createElement('div');
        const isAbsorbing = Math.random() < 0.4;
        const isAbove = Math.random() < 0.5;
        const isIncoming = Math.random() < 0.1; // 10% of particles come from outside

        const distance = 60 + Math.random() * 80; // Between 60â€“140px from center
        const duration = 3 + Math.random() * 3;
        const delay = Math.random() * 5;
        const size = 3 + Math.random() * 4;
        const spinDirection = Math.random() < 0.5 ? 'spin-slow' : 'reverse-spin';
        const angle = Math.floor(Math.random() * 360);

        // Set random opacity
        const opacity = 0.2 + Math.random() * 0.8;
        particle.classList.add('particle');
        particle.style.width = particle.style.height = `${size}px`;
        particle.style.backgroundColor = `rgba(255, 255, 255, ${opacity.toFixed(2)})`;
        particle.style.boxShadow = `0 0 12px 4px rgba(255, 255, 255, ${(opacity * 0.6).toFixed(2)})`;

        // ðŸ”„ Handle incoming particles
        if (isIncoming) {
            const incomingWrapper = document.createElement('div');
            incomingWrapper.classList.add('incoming');

            const startX = (Math.random() * 400 - 200).toFixed(2); // -200 to +200px
            const startY = (Math.random() * 400 - 200).toFixed(2);
            const incomingDuration = (2 + Math.random() * 2).toFixed(2); // 2â€“4s

            incomingWrapper.style.setProperty('--start-x', `${startX}px`);
            incomingWrapper.style.setProperty('--start-y', `${startY}px`);
            incomingWrapper.style.setProperty('--incoming-duration', `${incomingDuration}s`);

            incomingWrapper.appendChild(particle);

            incomingWrapper.addEventListener('animationend', () => {
                incomingWrapper.remove();
                createParticle();
            });

            container.appendChild(incomingWrapper);
            return; // Exit early
        }

        // ðŸ”„ Absorbing or orbiting particles
        orbit.classList.add('particle-orbit');
        orbit.style.transform = `rotate(${angle}deg)`;
        orbit.classList.add(isAbove ? 'z-20' : 'z-0');

        if (isAbsorbing) {
            const absorbDuration = duration.toFixed(2);
            orbit.style.setProperty('--absorb-duration', `${absorbDuration}s`);
            orbit.style.setProperty('--orbit-distance', `${distance}px`);
            orbit.classList.add('absorbing');
            orbit.style.animationDelay = `${delay}s`;

            orbit.addEventListener('animationend', () => {
                orbit.remove();
                createParticle();
            });

            orbit.appendChild(particle);
        } else {
            orbit.classList.add(spinDirection);
            orbit.style.animationDuration = `${duration}s`;
            orbit.style.animationDelay = `-${delay}s`;

            // Place particle at a specific distance in orbit
            particle.style.transform = `translate(-50%, -50%) translateX(${distance}px)`;
            orbit.appendChild(particle);
        }

        container.appendChild(orbit);
    }

    const numParticles = Math.floor(Math.random() * 10) + 50;
    for (let i = 0; i < numParticles; i++) {
      createParticle();
    }
  </script>

</body>
</html>
